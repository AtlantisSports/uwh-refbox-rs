## Developing

First, install the required tools:
- [fusesoc](https://fusesoc.readthedocs.io/en/stable/user/installation.html)
- [sv2v](https://github.com/zachjs/sv2v)
- [verilator](https://verilator.org/guide/latest/install.html)
- [yosys](https://yosyshq.net/yosys/)

There are two top level modules:
- `top.sv`: For the production use of the LED panel
- `top_led_test.sv`: For testing the LED panel during production. Continuously runs all LEDs at low brightness

To build the LED panel, run:
```bash
fusesoc run --target=alchitry_cu atlantis_sports:boards:led_panel:1.0.0
```
The bin file be placed at `build/atlantis_sports_boards_led_panel_1.0.0/alchitry_cu/atlantis_sports_boards_led_panel_1.0.0.bin`
It can be flashed to the Alchitry Cu board using [Alchitry Labs](https://alchitry.com/Alchitry-Labs-V2/download.html)

To run the testbench, run:
```bash
fusesoc run --target=sim atlantis_sports:boards:led_panel:1.0.0
```
The testbench will run the simulation and print the results to the console. The test cases of the testbench are automatically generated by the [`led-panel-sim`](../led-panel-sim) crate. Regenerate the test cases with `cargo run` in the [`led-panel-sim`](../led-panel-sim) directory.

To build the LED test bin, run:
```bash
fusesoc run --target=alchitry_cu_led_test atlantis_sports:boards:led_panel:1.0.0
```
